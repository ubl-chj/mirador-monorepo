version: '3'
services:
  mirador-custom:
    image: mirador-custom
    build: ./packages/mirador-custom-implementation
    container_name: mirador-custom
    ports:
      - "5000:5000"

  e2e:
    image: cypress
    build: ./packages/mirador-e2e-tests
    container_name: cypress
    depends_on:
      - mirador-custom
    environment:
      - CYPRESS_baseUrl=http://mirador-custom:5000
      - CYPRESS_RECORD_KEY=869468f7-9e3f-4d61-adbd-4e6b8adae11e
    volumes:
      - ./packages/mirador-e2e-tests/cypress:/app/cypress
    command: npx cypress run --record
